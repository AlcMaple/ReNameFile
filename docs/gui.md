[toc]

# 界面布局原型

- 界面布局原型仅供参考，具体以看到的效果为准

```bash
+---------------------------------------------------------------+
|  ReNameFile Tool                                          [-] |
+---------------------------------------------------------------+
| [ 区域 1：输入源 ]                                            |
|                                                               |
|  目标目录: [ C:\Users\Docs\MyPhotos          ] [ 浏览... ] |
|  (支持直接拖拽文件夹到此处)                                   |
|                                                               |
+---------------------------------------------------------------+
| [ 区域 2：控制台 ]                                            |
|                                                               |
|  模式选择:                                                    |
|  (o) 简单替换模式 (words.txt)     [ 编辑规则 ]             |
|  ( ) 正则模式 (regex_rules.txt)   [ 编辑规则 ]             |
|                                                               |
|  选项:                                                        |
|  [x] 保持原有目录结构 (Keep Structure)                        |
|  [ ] 清空旧的 Output 目录                                     |
|                                                               |
+---------------------------------------------------------------+
| [ 区域 3：执行与反馈 ]                                        |
|                                                               |
|           [ ▶ 开始重命名 (Start) ]                            |
|                                                               |
|  -----------------------------------------------------------  |
|  日志输出:                                                    |
|  [INFO] 加载规则 words.txt... 成功 (3条)                      |
|  [INFO] 正在处理 photo_01.jpg -> 2023_01.jpg                  |
|  [SUCCESS] 完成！总计: 50, 重命名: 48, 耗时: 0.5s             |
|                                                               |
+---------------------------------------------------------------+
```

# 交互流程

## 标准流程

- 用户运行 gui.py 能看到上述界面
- 点击文件夹图标选择文件夹
- 选择完文件夹后，默认选中“简单模式”。如果需要修改规则，点击旁边的“编辑规则”按钮（自动用记事本打开对应的 txt 文件）
- 点击“开始重命名”
- 底部的日志区域滚动显示处理进度。完成后弹出提示框“处理完毕”

## 交互式规则处理

- 当 RuleLoader 加载到需要参数的规则（如 extract_number）时，GUI 会捕获到这个事件然后进行弹窗拦截
- GUI 会弹出一个模态对话框

```bash
+---------------------------+
| 配置规则参数              |
+---------------------------+
| 检测到规则: 提取数字      |
| 模式: .*(\d+).* |
|                           |
| 请输入格式化位数:         |
| [ 3   ]                   |
|                           |
|      [ 确定 ] [ 取消 ]    |
+---------------------------+
```

- 用户点击确定后，参数传回系统，继续执行
