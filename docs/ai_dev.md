[toc]

# 项目背景

- 这是一次迭代更新的 v2 版本，直接把用户的使用门槛降到了零
- 原先的版本 GUI 界面交互复杂，不具备通用性，用户需要编写正则表达式等规则，不利于使用
- 全新版本引入了 LLM 概念，以及傻瓜式操作，降低了用户的使用门槛，提升了易用性
- 用户只需要重命名的目录，提供输入/输出示例，系统自动分析命名规律，生成规则，并提供预览界面进行人工修正

# 交互流程

## 启动与输入

1.  **极简入口**：界面只有一个巨大的按钮 **[ + 选择目标目录 ]**
2.  **目录选择**：用户选择文件夹后，自动扫描所有文件名，界面直接进入**主工作台**
    - 列出目录下**所有**文件的原文件名
    - “新文件名”一列初始为空

## 用户示例输入

- **用户操作**：用户可以在表格的“新文件名”列中，**任意挑选**几行进行手动重命名
  - _场景支持_：用户可以重命名第 1-5 行（处理规则 A），然后跳到第 20-25 行重命名（处理规则 B）
- **锁定机制**：用户手动输入的内容被标记为 **“用户锁定 (User Defined)”**，AI 绝对不会修改这些内容

## AI 智能填充

- 用户点击 **[ 开始智能分析 ]** 按钮
- **数据打包**：系统将当前的数据分为两类打包发送给 AI：
  1.  **参考集 (Examples)**：用户已经填好的那几行（原名 -> 新名）
  2.  **待填集 (Targets)**：用户留空的那些行（只包含原名）
- **推理与回填**：
  - AI 分析参考集的规律（可能包含多组规律）
  - AI 推理出待填集对应的新文件名
  - 界面自动填满剩下的空行，并标记为 **“AI 生成”**
- **进度反馈**：全量分析过程中显示进度条

## Diff & Edit

- 弹出一个 **Diff 结果确认窗口**
- **展示列**：[原文件名] | [新文件名 (AI 生成)] | [状态]
- **人工修正**：
  - 如果 AI 对某些文件推断错了（比如把无关文件也改名了），用户可以直接在表格里**双击修改**“新文件名”
  - 修改后的结果拥有最高优先级（覆盖 AI 规则）
  - 用户可以再次点击“重新分析”，让 AI 根据最新的示例重新计算
- **结构选项**：底部询问“是否保留原目录结构？”
- 用户点击 **[ ✅ 执行重命名 ]**

# 界面原型

## 首页

```text
+-------------------------------------------------------+
|  Smart Rename AI                                  [-] |
+-------------------------------------------------------+
|                                                       |
|                                                       |
|          [ 📂 选择要处理的文件夹... ]                 |
|                                                       |
|       (拖拽文件夹到这里也可以)                        |
|                                                       |
+-------------------------------------------------------+
```

## 示例输入

```text
+-------------------------------------------------------+
|  请输入示例                                           |         [-] |
+-------------------------------------------------------+
| 请填写几个文件名作为示例，剩下的由系统分析生成             |
|                                                       |
| [原文件名]            | [新文件名 (用户输入)]         |
| --------------------- | ----------------------------- |
| report_2023.pdf       | [ 2023年报.pdf          ]   |
| photo_001.jpg         | [                       ]     |
| photo_002.jpg         | [                       ]     |
| meeting_v1.docx       | [ 会议记录_v1.docx      ]   |
| ...                   | ...                           |
|                                                       |
|                      [ 开始智能分析 ]              |
+-------------------------------------------------------+
```

## Diff View

```text
+-------------------------------------------------------+
|  结果确认                               [-] |
+-------------------------------------------------------+
| 请检查重命名结果。如果不满意，可直接修改或修改部分后重新分析  |
|                                                       |
| [原文件名]      | [新文件名]              | [来源]    |
| --------------- | ----------------------- | --------- |
| report_2023.pdf | 2023年报.pdf            | 👤 用户   |
| photo_001.jpg   | [ 图片_001.jpg        ] | 🤖 AI     |
| photo_002.jpg   | [ 图片_002.jpg        ] | 🤖 AI     |
| meeting_v1.docx | 会议记录_v1.docx        | 👤 用户   |
| error_case.txt  | [ error_case.txt      ] | 🤖 AI     |
|                                                       |
| [x] 保留目录结构         [  重新分析 ]              |
|                                                       |
|              [  执行重命名 ]            |
+-------------------------------------------------------+
```
